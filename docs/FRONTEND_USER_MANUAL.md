# VisionForge Pro - 前端用户手册

## 📘 目录

1. [快速开始](#快速开始)
2. [登录与认证](#登录与认证)
3. [Dashboard - 实时监控](#dashboard---实时监控)
4. [Performance - 性能分析](#performance---性能分析)
5. [Logs - 日志查看](#logs---日志查看)
6. [Settings - 系统设置](#settings---系统设置)
7. [常见问题](#常见问题)

---

## 快速开始

### 系统要求

- **浏览器**: Chrome 90+, Firefox 88+, Edge 90+, Safari 14+
- **屏幕分辨率**: 最低 1280x720, 推荐 1920x1080
- **网络**: 需要能够访问后端WebSocket服务(默认端口8765)

### 首次访问

1. **打开浏览器**,访问系统地址(例如: `http://localhost:3000`)
2. **自动跳转**到登录页面
3. **输入凭据**并登录

### 默认账户

系统预置以下测试账户:

| 用户名 | 密码 | 角色 | 权限 |
|--------|------|------|------|
| admin | admin123 | 管理员 | 所有权限 |
| operator | oper123 | 操作员 | 读+写(不包括配置) |
| viewer | view123 | 观察者 | 只读 |

**⚠️ 重要:** 生产环境中请立即修改默认密码!

---

## 登录与认证

### 登录界面

![登录页面](images/login.png)

#### 功能说明

1. **用户名输入框**: 输入您的用户名
2. **密码输入框**: 输入密码(支持显示/隐藏)
3. **记住我**: 勾选后下次自动填充用户名
4. **登录按钮**: 提交登录请求

#### 登录流程

```
1. 输入用户名和密码
2. 点击"登录"按钮
3. 系统验证凭据
4. 成功后跳转到Dashboard页面
5. 失败则显示错误信息
```

#### Token管理

- **Access Token**: 有效期1小时,用于API请求
- **Refresh Token**: 有效期24小时,用于刷新Access Token
- **自动刷新**: Token过期前5分钟自动刷新
- **存储位置**: 浏览器localStorage

#### 安全提示

- 🔒 密码使用HTTPS传输(如果启用WSS)
- 🔒 Token使用JWT签名防篡改
- 🔒 登录失败5次后账户锁定15分钟
- 🔒 闲置30分钟自动登出

---

## Dashboard - 实时监控

Dashboard是系统的核心页面,提供实时性能监控功能。

### 页面布局

```
┌────────────────────────────────────────────────────────┐
│  性能监控仪表盘                                         │
├───────────┬───────────┬───────────┬───────────┐
│ CPU使用率 │ 内存使用率 │   帧率    │ 网络延迟  │
│  45.3%   │  62.1%    │  60 FPS  │  12 ms   │
└───────────┴───────────┴───────────┴───────────┘
├────────────────────┬────────────────────┐
│  CPU使用率趋势      │  内存使用率趋势      │
│  [实时折线图]       │  [实时折线图]       │
├────────────────────┼────────────────────┤
│  帧率趋势          │  延迟趋势          │
│  [实时折线图]       │  [实时折线图]       │
└────────────────────┴────────────────────┘
```

### 指标卡片

#### 1. CPU使用率
- **显示**: 当前CPU使用百分比
- **颜色指示**:
  - 绿色: 0-60% (正常)
  - 黄色: 60-80% (警告)
  - 红色: 80-100% (危险)
- **更新频率**: 每秒更新

#### 2. 内存使用率
- **显示**: 当前内存使用百分比
- **颜色指示**: 同CPU
- **更新频率**: 每秒更新

#### 3. 帧率(FPS)
- **显示**: 当前系统帧率
- **颜色指示**:
  - 绿色: 50+ FPS (流畅)
  - 黄色: 30-50 FPS (一般)
  - 红色: <30 FPS (卡顿)
- **更新频率**: 每秒更新

#### 4. 网络延迟
- **显示**: WebSocket往返延迟
- **颜色指示**:
  - 绿色: 0-50ms (优秀)
  - 黄色: 50-100ms (良好)
  - 红色: >100ms (较慢)
- **更新频率**: 每秒更新

### 趋势图表

#### 特性

- **时间范围**: 显示最近60秒数据
- **自动滚动**: 新数据自动添加,旧数据移除
- **平滑曲线**: 使用smooth line渲染
- **渐变填充**: 图表区域半透明渐变
- **悬停提示**: 鼠标悬停显示详细数值

#### 交互操作

- **缩放**: 鼠标滚轮放大/缩小
- **拖动**: 点击拖动查看历史数据
- **重置**: 双击图表重置视图

### WebSocket连接状态

页面底部显示连接状态:

- ✅ **已连接**(绿色): 正常接收数据
- ❌ **未连接**(红色): 连接断开,自动重连中

---

## Performance - 性能分析

Performance页面提供详细的性能数据分析和导出功能。

### 时间范围过滤

#### 预设范围

- 最近5分钟
- 最近15分钟
- 最近1小时
- 最近6小时
- 最近24小时
- 自定义范围

#### 自定义范围

1. 选择"自定义"选项
2. 弹出日期时间选择器
3. 选择开始和结束时间
4. 点击"确定"应用

### 统计摘要卡片

显示所选时间范围内的统计数据:

- **平均CPU使用率**: 所有数据点的算术平均
- **平均内存使用率**: 所有数据点的算术平均
- **平均帧率**: 所有数据点的算术平均
- **平均延迟**: 所有数据点的算术平均

### 综合性能图表

#### 图表类型

- **折线图**: 清晰显示趋势变化
- **柱状图**: 便于对比不同时间点

#### 双Y轴设计

- **左Y轴**: 百分比(CPU、内存)
- **右Y轴**: 绝对值(FPS、延迟)

#### 图例

- CPU使用率 (蓝色)
- 内存使用率 (绿色)
- 帧率 (橙色)
- 延迟 (红色)

### 详细数据表格

#### 功能

1. **搜索**: 输入关键词过滤数据
2. **排序**: 点击列标题排序
3. **分页**: 每页显示50条数据
4. **颜色编码**: 根据阈值显示不同颜色标签

#### 列说明

| 列名 | 说明 | 格式 |
|------|------|------|
| 时间戳 | 数据采集时间 | YYYY-MM-DD HH:mm:ss |
| CPU使用率(%) | CPU百分比 | 小数点后1位 |
| 内存使用率(%) | 内存百分比 | 小数点后1位 |
| 帧率(FPS) | 每秒帧数 | 整数 |
| 延迟(ms) | 网络延迟 | 整数 |

### 数据导出

#### CSV导出

1. 点击"导出CSV"按钮
2. 浏览器自动下载文件
3. 文件命名格式: `performance_YYYY-MM-DDTHH-mm-ss.csv`

#### CSV格式

```csv
时间戳,CPU使用率(%),内存使用率(%),帧率(FPS),延迟(ms)
2025-12-20 10:30:00,45.3,62.1,60,12
2025-12-20 10:30:01,46.1,62.3,59,13
...
```

---

## Logs - 日志查看

Logs页面提供实时日志查看和过滤功能。

### 过滤器

#### 日志级别过滤

- **调试(Debug)**: 详细调试信息
- **信息(Info)**: 一般信息
- **警告(Warning)**: 警告信息
- **错误(Error)**: 错误信息
- **严重错误(Critical)**: 严重错误

#### 日志分类过滤

- **系统(System)**: 系统级别日志
- **网络(Network)**: 网络通信日志
- **数据库(Database)**: 数据库操作日志
- **认证(Auth)**: 认证和授权日志
- **性能(Performance)**: 性能相关日志
- **业务(Business)**: 业务逻辑日志

#### 关键词搜索

实时搜索日志内容,支持模糊匹配。

### 日志统计

显示日志数量统计:

- **总计**: 所有日志总数
- **错误**: 错误和严重错误数量(红色)
- **警告**: 警告数量(黄色)
- **信息**: 信息和调试数量(绿色)

### 日志列表

#### 时间线视图

以时间线形式展示日志,每条日志包含:

1. **时间戳**: 日志产生时间
2. **级别标签**: 带颜色的级别标识
3. **分类标签**: 日志分类
4. **消息内容**: 日志详细信息
5. **详细信息**(可展开): 附加的详细数据

#### 颜色编码

- 🔵 调试: 灰色边框
- 🟢 信息: 绿色边框
- 🟡 警告: 黄色边框
- 🔴 错误/严重错误: 红色边框

### 功能按钮

#### 清空日志

- 点击"清空日志"按钮
- 弹出确认对话框
- 确认后清空所有日志

#### 导出日志

- 点击"导出日志"按钮
- 导出为CSV格式
- 包含当前过滤后的所有日志

#### 自动滚动

- 默认启用自动滚动
- 新日志到达时自动滚动到底部
- 点击"停止自动滚动"暂停

---

## Settings - 系统设置

Settings页面提供系统配置和管理功能(**需要管理员权限**)。

### WebSocket配置

#### 服务器地址

- **格式**: `ws://host:port/path` 或 `wss://host:port/path`
- **示例**: `ws://localhost:8765/ws`

#### 启用WSS

- 勾选后使用加密的WebSocket Secure连接
- 需要后端配置SSL证书

#### 自动重连

- 连接断开后自动尝试重连
- 使用指数退避策略

#### 重连延迟

- **范围**: 1000ms - 30000ms
- **默认**: 5000ms (5秒)

#### 心跳间隔

- **范围**: 5000ms - 60000ms
- **默认**: 10000ms (10秒)

### 性能监控配置

#### 数据采集间隔

- **范围**: 1-60秒
- **默认**: 5秒
- **影响**: 数据精度和网络流量

#### 历史数据保留

- **范围**: 1-168小时(7天)
- **默认**: 24小时
- **影响**: 内存占用

#### 警告阈值

- **CPU警告阈值**: 0-100%, 默认80%
- **内存警告阈值**: 0-100%, 默认80%
- **FPS警告阈值**: 1-120, 默认30

### 日志配置

#### 日志级别

选择最低记录级别:
- Debug: 记录所有日志
- Info: 忽略Debug
- Warning: 仅Warning/Error/Critical
- Error: 仅Error/Critical

#### 最大日志数量

- **范围**: 100-10000
- **默认**: 1000
- **影响**: 内存占用和性能

#### 自动清理

- 启用后超过最大数量自动清理旧日志
- 使用FIFO策略

#### 启用本地存储

- 将日志保存到localStorage
- 刷新页面后日志仍然存在

### 用户管理

#### 用户列表

显示所有用户信息:
- 用户名
- 角色(带颜色标签)
- 邮箱
- 创建时间

#### 添加用户

1. 点击"添加用户"按钮
2. 填写用户信息:
   - 用户名
   - 邮箱
   - 密码
   - 角色选择
3. 点击"确定"保存

#### 编辑用户

1. 点击用户行的"编辑"按钮
2. 修改用户信息
3. 点击"确定"保存

#### 删除用户

1. 点击用户行的"删除"按钮
2. 确认删除操作
3. 用户立即删除

#### 角色说明

- **游客(Guest)**: 受限只读权限
- **观察者(Viewer)**: 完整只读权限
- **操作员(Operator)**: 读+写权限(不包括配置)
- **管理员(Admin)**: 所有权限

### 关于页面

显示系统信息:
- 系统名称和版本
- 前端技术栈
- 后端技术栈
- 安全特性
- 技术特性列表

---

## 常见问题

### Q1: 忘记密码怎么办?

**A:** 联系系统管理员重置密码,或通过后端数据库直接修改。

### Q2: WebSocket连接失败?

**A:**
1. 检查后端服务是否运行
2. 检查WebSocket地址配置
3. 检查防火墙设置
4. 查看浏览器Console错误信息

### Q3: 图表不显示或不更新?

**A:**
1. 确认WebSocket已连接
2. 打开浏览器开发者工具查看Console错误
3. 检查后端是否发送数据
4. 刷新页面重新加载

### Q4: Token过期怎么办?

**A:** 系统会自动刷新Token,如果自动刷新失败,会跳转到登录页面重新登录。

### Q5: 如何导出所有历史数据?

**A:**
1. 进入Performance页面
2. 选择"自定义"时间范围
3. 选择所需的起止时间
4. 点击"导出CSV"按钮

### Q6: 页面卡顿或加载慢?

**A:**
1. 减少历史数据保留时间
2. 增加数据采集间隔
3. 清理浏览器缓存
4. 升级浏览器版本

### Q7: 移动端能否使用?

**A:** 系统使用响应式设计,支持移动端访问,但推荐使用桌面浏览器以获得最佳体验。

### Q8: 如何切换语言?

**A:** 当前版本仅支持中文,未来版本将支持多语言切换。

### Q9: 数据会丢失吗?

**A:**
- 实时数据: 仅保存在内存中,刷新页面会丢失
- 配置数据: 保存在localStorage,不会丢失
- 历史数据: 后端数据库持久化存储

### Q10: 如何获取技术支持?

**A:**
- 查看[GitHub Issues](https://github.com/VisionForgePro/issues)
- 发送邮件至support@visionforge.com
- 查看在线文档获取更多信息

---

## 键盘快捷键

| 快捷键 | 功能 |
|--------|------|
| Ctrl + D | 跳转到Dashboard |
| Ctrl + P | 跳转到Performance |
| Ctrl + L | 跳转到Logs |
| Ctrl + S | 跳转到Settings |
| Ctrl + Q | 登出 |
| F5 | 刷新当前页面 |
| Esc | 关闭对话框 |

---

## 浏览器兼容性

| 浏览器 | 最低版本 | 推荐版本 | 状态 |
|--------|---------|---------|------|
| Chrome | 90 | 最新 | ✅ 完全支持 |
| Firefox | 88 | 最新 | ✅ 完全支持 |
| Edge | 90 | 最新 | ✅ 完全支持 |
| Safari | 14 | 最新 | ✅ 完全支持 |
| Opera | 76 | 最新 | ✅ 完全支持 |
| IE 11 | - | - | ❌ 不支持 |

---

## 更新日志

### v1.2.0 (2025-12-20)

**新增功能:**
- ✨ 完整的前端界面实现
- ✨ 实时性能监控Dashboard
- ✨ 性能分析和导出功能
- ✨ 日志查看和过滤功能
- ✨ 系统设置和用户管理
- ✨ WebSocket实时通信
- ✨ JWT Token认证
- ✨ RBAC权限控制

**改进:**
- 🎨 Material Design风格UI
- 📱 响应式设计支持移动端
- ⚡ ECharts实时图表优化
- 🔐 安全性增强(WSS + JWT + RBAC)

---

**文档版本:** v1.2.0
**最后更新:** 2025-12-20
**维护者:** VisionForge Team

**相关文档:**
- [集成测试指南](INTEGRATION_TESTING_GUIDE.md)
- [安全架构文档](SECURITY_ARCHITECTURE.md)
- [API参考文档](API_REFERENCE.md)

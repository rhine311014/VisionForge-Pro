# VisionForge Pro - 交互流程设计

## 文档信息

- **文档版本**: v1.0
- **创建日期**: 2025-12-14
- **设计者**: VisionForge Team

---

## 1. 用户交互总览

### 1.1 核心交互场景

| 场景 | 用户角色 | 频率 | 重要性 |
|------|---------|------|--------|
| 创建新配方 | 工程师 | 低 | P0 |
| 运行检测 | 操作员 | 极高 | P0 |
| 调试参数 | 工程师 | 高 | P0 |
| 查看结果 | 操作员/工程师 | 极高 | P0 |
| 切换模式 | 工程师 | 中 | P1 |
| 导出报告 | 管理员 | 低 | P2 |

### 1.2 交互设计原则

```
5分钟上手原则：
┌──────────────────────────────────────────┐
│ 第1分钟：打开软件，看到向导               │
│ 第2分钟：选择相机，调整曝光看到图像        │
│ 第3分钟：拖拽添加3个检测步骤              │
│ 第4分钟：调整参数看到实时结果             │
│ 第5分钟：点击运行，完成第一次检测         │
└──────────────────────────────────────────┘
```

---

## 2. 应用启动流程

### 2.1 启动流程图

```
[用户启动应用]
      │
      ▼
[加载配置文件]
      │
      ├─失败─> [使用默认配置]
      │
      ▼
[检测许可证] ───失败─> [显示试用提示]
      │
      ▼成功
[初始化硬件HAL]
      │
      ▼
[显示主窗口]
      │
      ├──第一次使用? ──是──> [显示欢迎向导]
      │                       │
      │                       ▼
      │                  [新建配方向导]
      │                       │
      │                       ▼
      │                  [简单模式界面]
      │
      ├──否──> [加载上次配方]
      │              │
      │              ▼
      │         [显示上次使用模式]
      │              │
      │              ├─简单模式
      │              └─专业模式
      │
      ▼
[就绪状态，等待用户操作]
```

### 2.2 欢迎向导流程

```
┌────────────────────────────────────────────────────┐
│              欢迎使用 VisionForge Pro               │
│                                                    │
│  选择开始方式：                                     │
│  ○ 创建新项目（推荐新手）                          │
│  ○ 打开现有项目                                    │
│  ○ 从模板创建（快速开始）                          │
│                                                    │
│              [下一步]      [跳过向导]              │
└────────────────────────────────────────────────────┘
                  │
                  ▼
┌────────────────────────────────────────────────────┐
│              选择检测场景                           │
│                                                    │
│  ┌──────────┐ ┌──────────┐ ┌──────────┐          │
│  │  圆形     │ │  划痕     │ │  文字     │          │
│  │  检测     │ │  检测     │ │  识别     │          │
│  └──────────┘ └──────────┘ └──────────┘          │
│  ┌──────────┐ ┌──────────┐ ┌──────────┐          │
│  │  尺寸     │ │  颜色     │ │  自定义   │          │
│  │  测量     │ │  分类     │ │  (空白)   │          │
│  └──────────┘ └──────────┘ └──────────┘          │
│                                                    │
│         [上一步]      [下一步]      [取消]         │
└────────────────────────────────────────────────────┘
                  │
                  ▼
┌────────────────────────────────────────────────────┐
│              配置相机                               │
│                                                    │
│  检测到的相机：                                     │
│  ● Basler acA1920-40gm (192.168.1.10)             │
│  ○ 未检测到相机 (使用文件模拟)                     │
│                                                    │
│  [测试采集]  ┌────────────────┐                    │
│              │  [实时预览图像] │                    │
│              └────────────────┘                    │
│                                                    │
│  曝光时间: [════●════] 5000 μs                     │
│  增益:     [══●══════] 2.5 dB                      │
│                                                    │
│         [上一步]      [完成]      [取消]           │
└────────────────────────────────────────────────────┘
                  │
                  ▼
         [进入简单模式主界面]
```

---

## 3. 简单模式核心流程

### 3.1 添加检测步骤流程

```
[用户点击 "+ 添加步骤"]
         │
         ▼
┌────────────────────────────────────────┐
│      快速工具选择器 (对话框)           │
│                                        │
│  【图像获取】  【预处理】  【定位】     │
│  📷 📁 📂    🔄 🌀 ⚫     🎯 ⭕ 📐    │
│                                        │
│  【测量】      【判定】    【输出】     │
│  📏 📐 📊    ✓ ⚖         📡 💾      │
│                                        │
│          [取消]      [帮助]            │
└────────────────────────────────────────┘
         │
         │ (用户点击 "找圆")
         ▼
[创建 FindCircleTool 实例]
         │
         ▼
[添加到步骤列表末尾]
         │
         ▼
[更新步骤列表UI]
         │
         ├─> [步骤列表中新增一行]
         │   "4. 找圆" [✓]
         │
         ▼
[自动选中新步骤]
         │
         ▼
[右侧参数面板显示该工具参数]
         │
         ├─> 最小半径: [滑块] 50 px
         ├─> 最大半径: [滑块] 200 px
         ├─> 边缘强度: [滑块] 30
         │
         ▼
[提示用户调整参数]
  "拖动滑块调整参数，在图像上绘制ROI"
         │
         ▼
[等待用户操作]
```

### 3.2 参数调整流程

```
[用户拖动滑块 "最小半径"]
         │
         ▼
[QSlider::valueChanged 信号]
         │
         ▼
[SimpleParamPanel 捕获信号]
         │
         ▼
[更新工具参数]
  tool->params().minRadius = newValue;
         │
         ▼
[发出 paramChanged 信号]
         │
         ▼
[ImageDisplayWidget 监听到]
         │
         ▼
[触发实时处理]
  executor->executeSingleStep(currentStepIndex);
         │
         ▼
[处理图像]
         │
         ├─> [调用 FindCircleTool::process()]
         │
         ▼
[获取处理结果]
         │
         ├─> 找到的圆: (x, y, r)
         │
         ▼
[更新图像显示]
         │
         ├─> 绘制圆形叠加
         ├─> 显示结果文字 "找到 3 个圆"
         │
         ▼
[用户立即看到效果]
  (所见即所得！)
```

### 3.3 ROI示教流程

```
[用户点击 "🎯 在图上设置"]
         │
         ▼
[ImageDisplayWidget 进入ROI绘制模式]
         │
         ├─> 光标变为十字准星
         ├─> 提示文字: "拖动鼠标绘制矩形区域"
         │
         ▼
[用户按下鼠标左键]
  起点 (x1, y1)
         │
         ▼
[用户拖动鼠标]
         │
         ├─> 实时绘制半透明矩形
         │   rubberBand显示
         │
         ▼
[用户释放鼠标]
  终点 (x2, y2)
         │
         ▼
[计算ROI矩形]
  roi = Rect(x1, y1, x2-x1, y2-y1);
         │
         ▼
[更新工具参数]
  tool->params().roi = roi;
  tool->params().useROI = true;
         │
         ▼
[退出ROI绘制模式]
         │
         ▼
[实时处理，显示结果]
  (仅在ROI区域内查找)
         │
         ▼
[ROI矩形持续显示在图像上]
  (绿色边框表示有效ROI)
```

### 3.4 运行检测流程

```
[用户点击 "▶ 运行"]
         │
         ▼
[检查配方完整性]
         │
         ├─有相机步骤? ─否─> [提示错误: 缺少图像源]
         │                       │
         │                       ▼
         │                   [中止运行]
         │
         ├─是
         ▼
[初始化TaskScheduler]
         │
         ├─> setRecipe(currentRecipe)
         ├─> setRunMode(Continuous)  // 连续运行
         │
         ▼
[启动任务]
  scheduler->start();
         │
         ▼
╔═════════════════════════════════════════╗
║          连续运行循环                    ║
║                                         ║
║  ┌─────────────────────────────────┐   ║
║  │ 1. 触发相机采集                  │   ║
║  │    camera->grabImage()          │   ║
║  │          │                       │   ║
║  │          ▼                       │   ║
║  │ 2. 执行处理流程                  │   ║
║  │    executor->execute(image)     │   ║
║  │          │                       │   ║
║  │          ├─> Step 1: 灰度转换    │   ║
║  │          ├─> Step 2: 高斯滤波    │   ║
║  │          ├─> Step 3: 找圆        │   ║
║  │          ├─> Step 4: 测量距离    │   ║
║  │          └─> Step 5: OK/NG判定   │   ║
║  │          │                       │   ║
║  │          ▼                       │   ║
║  │ 3. 更新UI显示                    │   ║
║  │    ├─> 图像叠加结果               │   ║
║  │    ├─> 更新状态栏统计             │   ║
║  │    └─> 记录日志                  │   ║
║  │          │                       │   ║
║  │          ▼                       │   ║
║  │ 4. 输出结果                      │   ║
║  │    ├─> PLC: DO1 = OK             │   ║
║  │    └─> 保存图像(可选)            │   ║
║  │          │                       │   ║
║  │          ▼                       │   ║
║  │ 5. 更新统计                      │   ║
║  │    okCount++                    │   ║
║  │    状态栏: "OK 1,235 / NG 12"   │   ║
║  │          │                       │   ║
║  │          ▼                       │   ║
║  │    (回到步骤1)                   │   ║
║  └─────────────────────────────────┘   ║
║              │                          ║
║              │ (用户点击 "⏸ 停止")      ║
║              ▼                          ║
╚═════════════════════════════════════════╝
         │
         ▼
[停止任务]
  scheduler->stop();
         │
         ▼
[清理资源]
         │
         ├─> 停止相机采集
         ├─> 保存统计数据
         │
         ▼
[回到就绪状态]
```

---

## 4. 专业模式核心流程

### 4.1 模式切换流程

```
[用户点击 "简单模式 ▼" 下拉菜单]
         │
         ▼
┌────────────────────────┐
│ ○ 简单模式 (当前)      │
│ ● 专业模式             │
└────────────────────────┘
         │
         │ (选择 "专业模式")
         ▼
[弹出确认对话框]
┌────────────────────────────────────┐
│ 切换到专业模式？                    │
│                                    │
│ 专业模式提供完整功能，但界面更复杂  │
│ 当前配方不会改变，只是显示方式      │
│                                    │
│    [取消]      [确定切换]          │
└────────────────────────────────────┘
         │
         │ (确定)
         ▼
[保存当前UI状态]
  ├─> 当前选中步骤
  ├─> 滚动位置
  └─> 参数面板状态
         │
         ▼
[隐藏 SimpleModeWidget]
  modeStack->setCurrentIndex(1);
         │
         ▼
[显示 ProfessionalModeWidget]
         │
         ├─> 恢复项目树
         ├─> 显示工具箱
         ├─> 显示多Tab工作区
         └─> 显示完整属性面板
         │
         ▼
[恢复数据]
  ├─> 加载同一个Recipe对象
  ├─> 选中之前的步骤
  └─> 同步参数显示
         │
         ▼
[切换完成]
  提示: "已切换到专业模式"
```

### 4.2 多任务管理流程

```
[用户在项目树右键点击]
         │
         ▼
┌────────────────────────┐
│ ▸ 新建任务             │
│ ▸ 导入任务             │
│ ─────────────          │
│ ▸ 删除                 │
│ ▸ 重命名               │
└────────────────────────┘
         │
         │ (选择 "新建任务")
         ▼
[弹出新建任务对话框]
┌────────────────────────────────────┐
│ 新建检测任务                        │
│                                    │
│ 任务名称: [__________________]     │
│ 模板:     [空白任务 ▼]             │
│           - 空白任务               │
│           - 圆形检测模板           │
│           - 划痕检测模板           │
│                                    │
│    [取消]      [创建]              │
└────────────────────────────────────┘
         │
         ▼
[创建新Recipe对象]
         │
         ├─> 如果选择了模板
         │   └─> 从模板复制步骤
         │
         ▼
[添加到项目树]
  Project
    └─ 新任务1  ← 新增
         │
         ▼
[自动选中新任务]
         │
         ▼
[中间工作区切换到该任务]
         │
         ▼
[用户可以添加步骤、配置参数...]
```

### 4.3 调试模式流程

```
[用户点击工具栏 "🔄 单步"]
         │
         ▼
[进入调试模式]
  executor->setDebugMode(true);
         │
         ├─> 工具栏变化:
         │   [▶▶ 执行下一步] [⏹ 退出调试]
         │
         ├─> 步骤列表高亮当前步骤
         │   Step 1 ← 黄色高亮
         │
         ▼
[暂停在第一步]
  提示: "调试模式：准备执行步骤1"
         │
         ▼
[用户点击 "▶▶ 执行下一步"]
         │
         ▼
[执行当前步骤]
  executor->stepInto();
         │
         ├─> 执行 Step 1: 灰度转换
         │   耗时: 0.3 ms
         │
         ▼
[显示步骤结果]
         │
         ├─> 图像显示: 灰度图
         ├─> 步骤列表: Step 1 ✓ (0.3ms)
         ├─> 日志输出: "[DEBUG] Step 1 完成"
         │
         ▼
[暂停在下一步]
  高亮 Step 2
  提示: "调试模式：准备执行步骤2"
         │
         ▼
[用户继续点击 "▶▶" 或点击 "⏹ 退出"]
         │
         ├─> 继续单步: 重复上述流程
         │
         └─> 退出调试:
             ├─> setDebugMode(false)
             ├─> 恢复正常工具栏
             └─> 提示: "已退出调试模式"
```

---

## 5. 配方管理流程

### 5.1 保存配方流程

```
[用户点击 "💾 保存" 或 Ctrl+S]
         │
         ▼
[检查配方是否有文件路径]
         │
         ├─有路径 (已保存过)
         │   │
         │   ▼
         │ [直接保存到原文件]
         │   recipe->save(filePath);
         │   │
         │   ▼
         │ [显示成功提示]
         │   "配方已保存"
         │
         └─无路径 (新配方)
             │
             ▼
          [弹出"另存为"对话框]
┌────────────────────────────────────────┐
│ 保存配方                                │
│                                        │
│ 文件名: [新配方1.vfproj________]       │
│ 位置:   [C:\Projects\Vision\  📁]     │
│                                        │
│ 版本说明 (可选):                       │
│ ┌────────────────────────────────┐    │
│ │ 初始版本，包含基础圆检测流程    │    │
│ └────────────────────────────────┘    │
│                                        │
│    [取消]      [保存]                  │
└────────────────────────────────────────┘
             │
             ▼
          [执行保存]
             │
             ├─> 序列化配方数据
             │   recipeJson = recipe->toJson();
             │
             ├─> 写入文件
             │   saveToFile(filePath, recipeJson);
             │
             ├─> 创建版本快照
             │   versionControl->createSnapshot(...);
             │
             ▼
          [更新UI]
             │
             ├─> 窗口标题显示文件名
             │   "VisionForge Pro - 新配方1.vfproj"
             │
             ├─> 清除修改标记
             │   isModified = false;
             │
             ▼
          [显示成功提示]
            状态栏: "配方已保存到 xxx.vfproj"
```

### 5.2 打开配方流程

```
[用户点击 "📁 打开" 或 Ctrl+O]
         │
         ▼
[检查当前配方是否修改]
         │
         ├─已修改
         │   │
         │   ▼
         │ [弹出确认对话框]
         │ ┌──────────────────────────┐
         │ │ 当前配方已修改，是否保存？│
         │ │  [不保存] [取消] [保存]  │
         │ └──────────────────────────┘
         │         │
         │         ├─保存: 执行保存流程
         │         ├─不保存: 继续打开
         │         └─取消: 中止操作
         │
         └─未修改
             │
             ▼
          [弹出文件选择对话框]
┌────────────────────────────────────────┐
│ 打开配方                                │
│                                        │
│ 📁 最近使用:                            │
│   ▸ 螺丝检测.vfproj                    │
│   ▸ 屏幕划痕检测.vfproj                │
│                                        │
│ 📁 浏览文件...                          │
│                                        │
│    [取消]      [打开]                  │
└────────────────────────────────────────┘
             │
             ▼
          [加载配方文件]
             │
             ├─> 读取JSON文件
             │
             ├─> 解析数据
             │   recipe = new Recipe();
             │   recipe->fromJson(json);
             │
             ├─> 验证配方有效性
             │   ├─ 检查必需字段
             │   ├─ 验证步骤类型
             │   └─ 检查参数合法性
             │
             ▼
          [加载成功?]
             │
             ├─失败
             │   │
             │   ▼
             │ [显示错误对话框]
             │   "配方文件损坏或版本不兼容"
             │
             └─成功
                 │
                 ▼
              [更新UI]
                 │
                 ├─> 设置当前配方
                 │   recipeManager->setCurrentRecipe(recipe);
                 │
                 ├─> 刷新步骤列表
                 │   stepList->clear();
                 │   for (auto tool : recipe->steps())
                 │       stepList->addStep(tool);
                 │
                 ├─> 更新窗口标题
                 │
                 ▼
              [完成]
                状态栏: "已打开 xxx.vfproj"
```

### 5.3 配方版本对比流程

```
[用户在菜单选择 "工具" -> "版本历史"]
         │
         ▼
[打开版本历史对话框]
┌────────────────────────────────────────────────┐
│ 配方版本历史 - 螺丝检测.vfproj                  │
├────────────────────────────────────────────────┤
│ 版本列表:                │  版本详情:           │
│ ┌──────────────────────┐│ ┌──────────────────┐ │
│ │ ▶ v5 - 当前版本      ││ │ 版本: v5         │ │
│ │   2025-12-14 14:30  ││ │ 时间: 2025-12-14 │ │
│ │   作者: 张工         ││ │      14:30       │ │
│ │   "调整找圆参数"     ││ │ 作者: 张工       │ │
│ │                      ││ │                  │ │
│ │   v4                 ││ │ 变更说明:        │ │
│ │   2025-12-14 10:15  ││ │ "调整找圆参数，   │ │
│ │   "增加滤波步骤"     ││ │  提高准确率"     │ │
│ │                      ││ │                  │ │
│ │   v3                 ││ │ 修改内容:        │ │
│ │   2025-12-13 16:20  ││ │ • 修改步骤3参数  │ │
│ │   "初始版本"         ││ │   minRadius:     │ │
│ └──────────────────────┘│ │   45 → 50       │ │
│                          │ └──────────────────┘ │
│                          │                      │
│  [对比选中版本] [恢复到此版本] [导出]  [关闭]   │
└────────────────────────────────────────────────┘
         │
         │ (用户选择 v4 和 v5，点击 "对比")
         ▼
[生成版本差异]
  diff = versionControl->diff(recipeId, v4, v5);
         │
         ▼
[显示对比窗口]
┌────────────────────────────────────────────────┐
│ 版本对比: v4 ↔ v5                              │
├────────────────────────────────────────────────┤
│ v4 (2025-12-14 10:15)  │ v5 (2025-12-14 14:30)│
│ ──────────────────────────────────────────────│
│ Step 3: 找圆          │ Step 3: 找圆          │
│   minRadius: 45       │   minRadius: 50  ✎   │
│   maxRadius: 200      │   maxRadius: 200      │
│   edgeThreshold: 30   │   edgeThreshold: 30   │
│                       │                       │
│ (无变化)              │ (无变化)              │
│ ──────────────────────────────────────────────│
│                                               │
│  ✎ = 已修改    + = 新增    - = 删除           │
│                                               │
│         [恢复到v4]        [关闭]              │
└────────────────────────────────────────────────┘
```

---

## 6. 异常处理流程

### 6.1 相机连接失败

```
[TaskScheduler 启动]
         │
         ▼
[初始化相机]
  camera->open();
         │
         ▼
[连接失败]
  返回 false, 错误信息: "设备未找到"
         │
         ▼
[TaskScheduler 捕获错误]
  emit errorOccurred("相机连接失败: 设备未找到");
         │
         ▼
[MainWindow 监听到错误信号]
         │
         ▼
[显示错误对话框]
┌────────────────────────────────────────┐
│ ⚠ 相机连接失败                         │
│                                        │
│ 错误详情:                              │
│ 设备未找到 (192.168.1.10)              │
│                                        │
│ 可能原因:                              │
│ • 相机未通电                           │
│ • 网络连接问题                         │
│ • IP地址配置错误                       │
│                                        │
│ 建议操作:                              │
│ 1. 检查相机电源和网线                  │
│ 2. 使用 [诊断工具] 检测网络             │
│ 3. 使用 [文件模式] 进行离线测试        │
│                                        │
│  [诊断工具] [文件模式] [重试] [取消]   │
└────────────────────────────────────────┘
         │
         │ (用户点击 "诊断工具")
         ▼
[打开诊断窗口]
┌────────────────────────────────────────┐
│ 硬件诊断工具                            │
├────────────────────────────────────────┤
│ 正在扫描网络设备...                     │
│                                        │
│ ✓ 网卡: Intel Ethernet (已连接)        │
│ ✓ IP: 192.168.1.100                   │
│                                        │
│ ✗ 未发现 GenICam 设备                  │
│                                        │
│ 建议: 检查相机IP是否在同一网段          │
│       当前网段: 192.168.1.x            │
│                                        │
│              [关闭]                    │
└────────────────────────────────────────┘
```

### 6.2 检测超时

```
[运行检测中...]
         │
         ▼
[执行步骤3: AI检测]
  tool->process(image, result);
         │
         │ (处理时间 > 10秒)
         ▼
[超时监控触发]
         │
         ▼
[显示警告对话框]
┌────────────────────────────────────────┐
│ ⚠ 检测超时                            │
│                                        │
│ 步骤3 (AI检测) 执行时间过长            │
│ 当前: 10.2 秒                          │
│ 预期: < 1 秒                           │
│                                        │
│ 可能原因:                              │
│ • AI模型未使用GPU加速                  │
│ • 图像分辨率过大                       │
│ • 系统资源不足                         │
│                                        │
│ 建议操作:                              │
│ 1. 检查GPU是否可用                     │
│ 2. 降低图像分辨率                      │
│ 3. 查看 [性能分析]                     │
│                                        │
│  [继续等待] [跳过此步骤] [停止运行]    │
└────────────────────────────────────────┘
```

### 6.3 参数非法

```
[用户在参数面板输入数值]
  最小半径: [____-10____]  (输入了负数)
         │
         ▼
[参数验证器检查]
  validator->validate(value);
         │
         ▼
[验证失败]
  返回 false, 错误: "半径必须大于0"
         │
         ▼
[输入框变红色边框]
  setStyleSheet("border: 2px solid red;");
         │
         ▼
[显示错误提示]
  tooltip: "⚠ 半径必须大于0"
         │
         ▼
[禁用"应用"按钮]
  applyButton->setEnabled(false);
         │
         ▼
[用户修正输入]
  最小半径: [____50____]
         │
         ▼
[验证通过]
         │
         ├─> 边框恢复正常
         ├─> 启用"应用"按钮
         │
         ▼
[可以继续操作]
```

---

## 7. 性能优化交互流程

### 7.1 性能分析工具

```
[用户点击 "📊 性能分析"]
         │
         ▼
[打开性能分析窗口]
┌────────────────────────────────────────────────────┐
│ 性能分析报告 - 当前配方                             │
├────────────────────────────────────────────────────┤
│                                                    │
│  总执行时间: 23.5 ms                               │
│  ▓▓▓▓▓▓▓▓▓░░░░░░░░░░░░░░░░░  (目标: <10ms)        │
│                                                    │
│  步骤耗时分布:                                      │
│  ┌────────────────────────────────────────────┐   │
│  │ 1. 相机采集      │ ▓░░░░░░░░░ │  2.1 ms   │   │
│  │ 2. 灰度转换      │ ░░░░░░░░░░ │  0.3 ms   │   │
│  │ 3. 高斯滤波      │ ▓░░░░░░░░░ │  1.2 ms   │   │
│  │ 4. 找圆          │ ▓▓▓▓░░░░░░ │  5.8 ms ⚠│   │
│  │ 5. AI检测        │ ▓▓▓▓▓▓▓▓▓▓ │ 12.4 ms ⚠│   │
│  │ 6. 结果输出      │ ░░░░░░░░░░ │  0.5 ms   │   │
│  └────────────────────────────────────────────┘   │
│                                                    │
│  ⚠ 瓶颈检测:                                       │
│  • 步骤5 (AI检测) 占用 52.8% 时间                  │
│                                                    │
│  💡 优化建议:                                      │
│  1. 启用 TensorRT GPU加速 (预计提升 3-5倍)         │
│  2. 降低输入图像分辨率 (当前 1920x1080)            │
│  3. 考虑使用量化模型 (INT8)                        │
│                                                    │
│  [应用优化建议]  [导出报告]  [关闭]                │
└────────────────────────────────────────────────────┘
         │
         │ (用户点击 "应用优化建议")
         ▼
[自动优化向导]
┌────────────────────────────────────────┐
│ 性能优化向导                            │
│                                        │
│ 正在应用优化...                         │
│ ✓ 检测到 NVIDIA GPU (RTX 3060)        │
│ ✓ 为 AI检测 启用 TensorRT              │
│ ✓ 模型转换中... 50%                    │
│                                        │
│ [取消]                                 │
└────────────────────────────────────────┘
         │
         ▼
[优化完成]
┌────────────────────────────────────────┐
│ ✓ 优化完成                             │
│                                        │
│ 优化前: 23.5 ms                        │
│ 优化后:  8.2 ms (提升 65%)             │
│                                        │
│ 建议重新运行测试验证效果                │
│                                        │
│         [立即测试]  [关闭]             │
└────────────────────────────────────────┘
```

---

## 8. 交互设计检查清单

### 8.1 易用性检查

- [x] 新用户首次启动有向导引导
- [x] 常用操作有快捷键 (Ctrl+S, Ctrl+O, F5运行)
- [x] 参数调整实时预览（所见即所得）
- [x] 错误提示包含可操作建议
- [x] 支持拖拽操作（工具添加、步骤排序）
- [x] ROI支持鼠标示教（不需手动输入坐标）
- [x] 图标 + 文字双重标识（降低认知负荷）

### 8.2 反馈机制检查

- [x] 操作后有明确反馈（成功提示、错误提示）
- [x] 长时间操作显示进度条
- [x] 状态栏实时显示运行统计
- [x] 步骤执行有耗时显示
- [x] 参数非法立即高亮提示

### 8.3 防误操作检查

- [x] 删除步骤需要确认
- [x] 关闭未保存配方有提示
- [x] 切换模式前确认
- [x] 参数超出合理范围警告
- [x] 支持撤销/重做 (Ctrl+Z/Y)

---

**文档状态**: ✅ 已完成
**下一步**: 编写数据结构设计文档

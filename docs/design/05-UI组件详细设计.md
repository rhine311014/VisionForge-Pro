# VisionForge Pro - UIç»„ä»¶è¯¦ç»†è®¾è®¡

## æ–‡æ¡£ä¿¡æ¯

- **æ–‡æ¡£ç‰ˆæœ¬**: v1.0
- **åˆ›å»ºæ—¥æœŸ**: 2025-12-14
- **è®¾è®¡è€…**: VisionForge Team

---

## 1. UIç»„ä»¶æ€»è§ˆ

### 1.1 ç»„ä»¶å±‚æ¬¡ç»“æ„

```
MainWindow
â”œâ”€â”€ MenuBar (èœå•æ )
â”œâ”€â”€ ToolBar (å·¥å…·æ )
â”œâ”€â”€ CentralWidget (ä¸­å¿ƒéƒ¨ä»¶)
â”‚   â””â”€â”€ QStackedWidget (æ¨¡å¼åˆ‡æ¢)
â”‚       â”œâ”€â”€ SimpleModeWidget (ç®€å•æ¨¡å¼)
â”‚       â”‚   â”œâ”€â”€ StepListWidget
â”‚       â”‚   â”œâ”€â”€ ImageDisplayWidget
â”‚       â”‚   â””â”€â”€ SimpleParamPanel
â”‚       â””â”€â”€ ProfessionalModeWidget (ä¸“ä¸šæ¨¡å¼)
â”‚           â”œâ”€â”€ ProjectTreeWidget
â”‚           â”œâ”€â”€ ToolboxWidget
â”‚           â”œâ”€â”€ TabbedWorkspace
â”‚           â”œâ”€â”€ PropertyPanel
â”‚           â””â”€â”€ StepNavigator
â””â”€â”€ StatusBar (çŠ¶æ€æ )
```

### 1.2 ç»„ä»¶æ¸…å•

| ç»„ä»¶åç§° | ç±»å‹ | ç”¨é€” | æ‰€å±æ¨¡å¼ |
|---------|------|------|---------|
| StepListWidget | QListWidget | æ­¥éª¤åˆ—è¡¨ | ç®€å• |
| ImageDisplayWidget | QGraphicsView | å›¾åƒæ˜¾ç¤º | é€šç”¨ |
| SimpleParamPanel | QScrollArea | ç®€åŒ–å‚æ•°é¢æ¿ | ç®€å• |
| PropertyPanel | QScrollArea | å®Œæ•´å±æ€§é¢æ¿ | ä¸“ä¸š |
| ProjectTreeWidget | QTreeWidget | é¡¹ç›®æ ‘ | ä¸“ä¸š |
| ToolboxWidget | QWidget | å·¥å…·ç®± | ä¸“ä¸š |
| QuickToolSelector | QDialog | å·¥å…·é€‰æ‹©å™¨ | ç®€å• |

---

## 2. ç®€å•æ¨¡å¼UIç»„ä»¶

### 2.1 æ­¥éª¤åˆ—è¡¨ç»„ä»¶ (StepListWidget)

#### 2.1.1 åŠŸèƒ½éœ€æ±‚

- æ˜¾ç¤ºæ‰€æœ‰æ£€æµ‹æ­¥éª¤ï¼ˆçº¿æ€§åˆ—è¡¨ï¼‰
- æ”¯æŒæ‹–æ‹½æ’åº
- æ˜¾ç¤ºæ­¥éª¤çŠ¶æ€ï¼ˆå¯ç”¨/ç¦ç”¨ã€æˆåŠŸ/å¤±è´¥ï¼‰
- æ˜¾ç¤ºæ­¥éª¤è€—æ—¶
- å•å‡»é€‰ä¸­æ­¥éª¤

#### 2.1.2 ç±»è®¾è®¡

```cpp
// ============================================================
// æ­¥éª¤åˆ—è¡¨ç»„ä»¶
// ============================================================
class StepListWidget : public QListWidget {
    Q_OBJECT

public:
    explicit StepListWidget(QWidget* parent = nullptr);

    // æ­¥éª¤ç®¡ç†
    void addStep(VisionTool* tool);
    void insertStep(int index, VisionTool* tool);
    void removeStep(int index);
    void moveStep(int fromIndex, int toIndex);
    void clear();

    // æ­¥éª¤çŠ¶æ€
    void setStepEnabled(int index, bool enabled);
    void setStepStatus(int index, bool success);
    void setStepTime(int index, double timeMs);

    // è·å–æ­¥éª¤
    VisionTool* getTool(int index) const;
    int getStepCount() const;

    // å½“å‰é€‰ä¸­
    int currentStepIndex() const;
    void setCurrentStepIndex(int index);

signals:
    void stepClicked(int index);
    void stepDoubleClicked(int index);
    void stepMoved(int fromIndex, int toIndex);
    void stepEnabledChanged(int index, bool enabled);
    void stepDeleted(int index);

protected:
    // æ‹–æ‹½æ”¯æŒ
    void mousePressEvent(QMouseEvent* event) override;
    void mouseMoveEvent(QMouseEvent* event) override;
    void dropEvent(QDropEvent* event) override;
    void dragEnterEvent(QDragEnterEvent* event) override;

    // å³é”®èœå•
    void contextMenuEvent(QContextMenuEvent* event) override;

private slots:
    void onItemClicked(QListWidgetItem* item);
    void onItemDoubleClicked(QListWidgetItem* item);
    void onContextMenuRequested(const QPoint& pos);

private:
    void createContextMenu();
    void updateStepItem(int index);

private:
    StepItemDelegate* delegate_;
    QMenu* contextMenu_;

    QAction* actionEnable_;
    QAction* actionDisable_;
    QAction* actionDelete_;
    QAction* actionMoveUp_;
    QAction* actionMoveDown_;

    QPoint dragStartPos_;
    bool isDragging_;
};


// ============================================================
// æ­¥éª¤é¡¹å§”æ‰˜ï¼ˆè‡ªå®šä¹‰ç»˜åˆ¶ï¼‰
// ============================================================
class StepItemDelegate : public QStyledItemDelegate {
    Q_OBJECT

public:
    explicit StepItemDelegate(QObject* parent = nullptr);

    void paint(QPainter* painter,
               const QStyleOptionViewItem& option,
               const QModelIndex& index) const override;

    QSize sizeHint(const QStyleOptionViewItem& option,
                   const QModelIndex& index) const override;

private:
    void drawBackground(QPainter* painter, const QRect& rect,
                       bool selected, bool hovered) const;
    void drawStepNumber(QPainter* painter, const QRect& rect,
                       int stepNumber) const;
    void drawStepIcon(QPainter* painter, const QRect& rect,
                     const QString& toolType) const;
    void drawStepName(QPainter* painter, const QRect& rect,
                     const QString& name) const;
    void drawStepStatus(QPainter* painter, const QRect& rect,
                       bool enabled, bool success) const;
    void drawStepTime(QPainter* painter, const QRect& rect,
                     double timeMs) const;

private:
    static constexpr int ITEM_HEIGHT = 60;
    static constexpr int MARGIN = 8;
    static constexpr int ICON_SIZE = 32;
};
```

#### 2.1.3 ç»˜åˆ¶æ•ˆæœ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ â‘  ğŸ“·  ç›¸æœºé‡‡é›†            âœ“  2.1ms  â”‚  â”‚ â† å·²å®Œæˆæ­¥éª¤
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ â‘¡ ğŸ”„  ç°åº¦è½¬æ¢            âœ“  0.3ms  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ â‘¢ ğŸŒ€  é«˜æ–¯æ»¤æ³¢            âœ“  1.2ms  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—  â”‚
â”‚  â•‘ â‘£ â­•  æ‰¾åœ†                â³ è¿è¡Œä¸­  â•‘  â”‚ â† å½“å‰è¿è¡Œæ­¥éª¤
â”‚  â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ â‘¤ ğŸ“  æµ‹é‡è·ç¦»            â¸         â”‚  â”‚ â† ç­‰å¾…æ‰§è¡Œ
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ â‘¥ âœ“   èŒƒå›´åˆ¤å®š            â¸         â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                            â”‚
â”‚  [+ æ·»åŠ æ­¥éª¤]                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 2.1.4 æ ·å¼è¡¨

```css
/* æ­¥éª¤åˆ—è¡¨æ ·å¼ */
StepListWidget {
    background-color: #f5f5f5;
    border: none;
    outline: none;
}

StepListWidget::item {
    background-color: white;
    border: 1px solid #e0e0e0;
    border-radius: 4px;
    margin: 4px 8px;
    padding: 0;
}

StepListWidget::item:selected {
    background-color: #e3f2fd;
    border: 2px solid #2196f3;
}

StepListWidget::item:hover {
    border: 1px solid #90caf9;
}

StepListWidget::item:disabled {
    background-color: #fafafa;
    color: #bdbdbd;
}
```

---

### 2.2 å›¾åƒæ˜¾ç¤ºç»„ä»¶ (ImageDisplayWidget)

#### 2.2.1 åŠŸèƒ½éœ€æ±‚

- æ˜¾ç¤ºå›¾åƒï¼ˆæ”¯æŒç¼©æ”¾ã€å¹³ç§»ï¼‰
- å åŠ æ£€æµ‹ç»“æœï¼ˆåœ†ã€çº¿ã€çŸ©å½¢ã€æ–‡å­—ç­‰ï¼‰
- ROIç»˜åˆ¶ï¼ˆçŸ©å½¢ã€åœ†å½¢ã€å¤šè¾¹å½¢ï¼‰
- åå­—å‡†æ˜Ÿã€æµ‹é‡å·¥å…·
- å›¾åƒä¿å­˜

#### 2.2.2 ç±»è®¾è®¡

```cpp
// ============================================================
// å›¾åƒæ˜¾ç¤ºç»„ä»¶
// ============================================================
class ImageDisplayWidget : public QGraphicsView {
    Q_OBJECT

public:
    enum DrawMode {
        None,           // æ™®é€šæ¨¡å¼
        DrawROIRect,    // ç»˜åˆ¶çŸ©å½¢ROI
        DrawROICircle,  // ç»˜åˆ¶åœ†å½¢ROI
        DrawROIPolygon, // ç»˜åˆ¶å¤šè¾¹å½¢ROI
        Measure         // æµ‹é‡æ¨¡å¼
    };

    explicit ImageDisplayWidget(QWidget* parent = nullptr);

    // å›¾åƒæ˜¾ç¤º
    void setImage(const ImageData::Ptr& image);
    void clearImage();
    ImageData::Ptr currentImage() const { return currentImage_; }

    // ç¼©æ”¾æ§åˆ¶
    void fitInView();               // é€‚åº”çª—å£
    void actualSize();              // å®é™…å¤§å°
    void zoomIn();                  // æ”¾å¤§
    void zoomOut();                 // ç¼©å°
    void setZoomFactor(double factor);
    double zoomFactor() const { return zoomFactor_; }

    // ç»˜åˆ¶æ¨¡å¼
    void setDrawMode(DrawMode mode);
    DrawMode drawMode() const { return drawMode_; }

    // å åŠ ç»˜åˆ¶
    void clearOverlays();
    void addCircle(const QPointF& center, double radius, const QColor& color);
    void addLine(const QPointF& p1, const QPointF& p2, const QColor& color);
    void addRect(const QRectF& rect, const QColor& color);
    void addText(const QPointF& pos, const QString& text, const QColor& color);
    void addPolygon(const QPolygonF& polygon, const QColor& color);

    // ROI
    QRectF getROIRect() const { return roiRect_; }
    void setROIRect(const QRectF& rect);
    void clearROI();

signals:
    void roiRectChanged(const QRectF& rect);
    void roiCircleChanged(const QPointF& center, double radius);
    void roiPolygonChanged(const QPolygonF& polygon);
    void measurementDone(const QPointF& p1, const QPointF& p2, double distance);

protected:
    // é¼ æ ‡äº‹ä»¶
    void mousePressEvent(QMouseEvent* event) override;
    void mouseMoveEvent(QMouseEvent* event) override;
    void mouseReleaseEvent(QMouseEvent* event) override;
    void wheelEvent(QWheelEvent* event) override;

    // ç»˜åˆ¶äº‹ä»¶
    void paintEvent(QPaintEvent* event) override;

private:
    void setupScene();
    void drawCrosshair(QPainter* painter);
    void drawROI(QPainter* painter);
    void drawOverlays(QPainter* painter);

private:
    QGraphicsScene* scene_;
    QGraphicsPixmapItem* imageItem_;

    ImageData::Ptr currentImage_;
    double zoomFactor_;

    DrawMode drawMode_;
    QRectF roiRect_;
    QPointF roiCircleCenter_;
    double roiCircleRadius_;
    QPolygonF roiPolygon_;

    // ç»˜åˆ¶çŠ¶æ€
    bool isDrawing_;
    QPointF drawStartPos_;
    QPointF drawEndPos_;

    // å åŠ å…ƒç´ 
    struct OverlayElement {
        enum Type { Circle, Line, Rect, Text, Polygon };
        Type type;
        QColor color;
        QVariant data;
    };
    QList<OverlayElement> overlays_;

    // æ˜¾ç¤ºé€‰é¡¹
    bool showCrosshair_;
    bool showROI_;
    bool showOverlays_;
};
```

#### 2.2.3 å åŠ ç»˜åˆ¶æ•ˆæœ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ” 100%  [é€‚åº”] [1:1] [+] [-]   [ğŸ’¾ä¿å­˜]   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                              â”‚
â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚     â”‚                            â”‚ â† ROIçŸ©å½¢  â”‚
â”‚     â”‚      â•”â•â•â•â•â•â•â•â•—             â”‚   (ç»¿è‰²)  â”‚
â”‚     â”‚      â•‘ å›¾åƒ  â•‘             â”‚           â”‚
â”‚     â”‚      â•‘  +    â•‘             â”‚ â† åå­—å‡†æ˜Ÿâ”‚
â”‚     â”‚      â•‘       â•‘             â”‚           â”‚
â”‚     â”‚      â•šâ•â•â•â•â•â•â•â•             â”‚           â”‚
â”‚     â”‚          â”‚                 â”‚           â”‚
â”‚     â”‚          â— â† æ£€æµ‹åˆ°çš„åœ†     â”‚           â”‚
â”‚     â”‚        (150, 200)          â”‚           â”‚
â”‚     â”‚        R=75.2px            â”‚ â† ç»“æœæ–‡å­—â”‚
â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

å›¾ä¾‹ï¼š
- ç»¿è‰²çŸ©å½¢ï¼šROIåŒºåŸŸ
- çº¢è‰²åœ†åœˆï¼šæ£€æµ‹åˆ°çš„ç›®æ ‡
- è“è‰²çº¿æ¡ï¼šæµ‹é‡çº¿
- é»„è‰²æ–‡å­—ï¼šç»“æœæ ‡æ³¨
```

---

### 2.3 ç®€åŒ–å‚æ•°é¢æ¿ (SimpleParamPanel)

#### 2.3.1 åŠŸèƒ½éœ€æ±‚

- æ˜¾ç¤ºå½“å‰å·¥å…·çš„æ ¸å¿ƒå‚æ•°ï¼ˆéšè—é«˜çº§å‚æ•°ï¼‰
- ä½¿ç”¨æ»‘å—æ§ä»¶ï¼ˆæ˜“äºè°ƒæ•´ï¼‰
- å®æ—¶é¢„è§ˆå‚æ•°å˜åŒ–
- æä¾›"åœ¨å›¾ä¸Šè®¾ç½®"å¿«æ·æŒ‰é’®

#### 2.3.2 ç±»è®¾è®¡

```cpp
// ============================================================
// ç®€åŒ–å‚æ•°é¢æ¿
// ============================================================
class SimpleParamPanel : public QScrollArea {
    Q_OBJECT

public:
    explicit SimpleParamPanel(QWidget* parent = nullptr);

    void setTool(VisionTool* tool);
    void clear();

    VisionTool* currentTool() const { return currentTool_; }

signals:
    void paramChanged(const QString& paramName, const QVariant& value);
    void roiSetupRequested();

private slots:
    void onSliderValueChanged(int value);
    void onComboChanged(int index);
    void onCheckBoxToggled(bool checked);
    void onROIButtonClicked();

private:
    void createParamWidgets(VisionTool* tool);
    void clearParamWidgets();

    // åˆ›å»ºä¸åŒç±»å‹çš„å‚æ•°æ§ä»¶
    void createSliderParam(const QString& name, const QString& displayName,
                          double min, double max, double value,
                          const QString& unit = "");
    void createComboParam(const QString& name, const QString& displayName,
                         const QStringList& options, int currentIndex);
    void createCheckBoxParam(const QString& name, const QString& displayName,
                            bool checked);
    void createROIButton();

private:
    QWidget* contentWidget_;
    QFormLayout* layout_;
    VisionTool* currentTool_;

    // å‚æ•°æ§ä»¶æ˜ å°„ (paramName -> widget)
    QMap<QString, QWidget*> paramWidgets_;

    // å‚æ•°å…ƒæ•°æ®
    struct ParamMeta {
        QString name;
        double min;
        double max;
        QString unit;
    };
    QMap<QString, ParamMeta> paramMetas_;
};


// ============================================================
// å¸¦æ ‡ç­¾çš„æ»‘å—ç»„ä»¶
// ============================================================
class LabeledSlider : public QWidget {
    Q_OBJECT

public:
    LabeledSlider(const QString& label,
                  double min, double max, double value,
                  const QString& unit = "",
                  QWidget* parent = nullptr);

    double value() const;
    void setValue(double value);

signals:
    void valueChanged(double value);

private slots:
    void onSliderMoved(int position);
    void onSpinBoxChanged(double value);

private:
    QSlider* slider_;
    QDoubleSpinBox* spinBox_;
    QLabel* unitLabel_;

    double minValue_;
    double maxValue_;
    int sliderSteps_;  // æ»‘å—åˆ†è¾¨ç‡
};
```

#### 2.3.3 UIå¸ƒå±€ç¤ºä¾‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â­• åœ†æ£€æµ‹ å‚æ•°                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                         â”‚
â”‚  æœ€å°åŠå¾„:                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ [â•â•â•â•â•â•â•â•â—â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•]  50 pxâ”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                         â”‚
â”‚  æœ€å¤§åŠå¾„:                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ [â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â—â•â•â•â•â•â•] 200 pxâ”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                         â”‚
â”‚  è¾¹ç¼˜å¼ºåº¦:                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ [â•â•â•â—â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•]  30   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                         â”‚
â”‚  è¾¹ç¼˜ææ€§:                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ [æ­£è¾¹ç¼˜ â–¼]                        â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  ğŸ¯ åœ¨å›¾åƒä¸Šè®¾ç½®æ£€æµ‹åŒºåŸŸ           â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  ğŸ“Š æŸ¥çœ‹è¯¦ç»†ç»“æœ                   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                         â”‚
â”‚            [åº”ç”¨]    [é‡ç½®]             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### 2.4 å·¥å…·é€‰æ‹©å™¨å¯¹è¯æ¡† (QuickToolSelector)

#### 2.4.1 åŠŸèƒ½éœ€æ±‚

- å›¾æ ‡åŒ–å±•ç¤ºæ‰€æœ‰å·¥å…·
- æŒ‰åˆ†ç±»ç»„ç»‡ï¼ˆå›¾åƒæºã€é¢„å¤„ç†ã€æ£€æµ‹ç­‰ï¼‰
- æ‚¬åœæ˜¾ç¤ºå·¥å…·è¯´æ˜
- æ”¯æŒæœç´¢è¿‡æ»¤

#### 2.4.2 ç±»è®¾è®¡

```cpp
// ============================================================
// å¿«é€Ÿå·¥å…·é€‰æ‹©å™¨
// ============================================================
class QuickToolSelector : public QDialog {
    Q_OBJECT

public:
    explicit QuickToolSelector(QWidget* parent = nullptr);

    QString selectedToolType() const { return selectedType_; }

signals:
    void toolSelected(const QString& toolType);

private slots:
    void onToolButtonClicked();
    void onSearchTextChanged(const QString& text);
    void onCategoryChanged(int index);

private:
    void setupUI();
    void createToolButtons();
    void filterTools(const QString& keyword);

private:
    QLineEdit* searchEdit_;
    QComboBox* categoryCombo_;
    QScrollArea* scrollArea_;
    QWidget* buttonContainer_;
    QGridLayout* buttonLayout_;

    QString selectedType_;

    struct ToolButton {
        QPushButton* button;
        QString toolType;
        QString category;
        QString description;
    };
    QList<ToolButton> toolButtons_;
};


// ============================================================
// å·¥å…·å›¾æ ‡æŒ‰é’®
// ============================================================
class ToolIconButton : public QPushButton {
    Q_OBJECT

public:
    ToolIconButton(const QIcon& icon,
                   const QString& text,
                   const QString& description,
                   QWidget* parent = nullptr);

protected:
    void enterEvent(QEvent* event) override;
    void leaveEvent(QEvent* event) override;

private:
    QString description_;
    QTimer* tooltipTimer_;
};
```

#### 2.4.3 å¯¹è¯æ¡†å¸ƒå±€

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  é€‰æ‹©æ£€æµ‹å·¥å…·                    [Ã—]              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                  â”‚
â”‚  æœç´¢: [__________________ğŸ”]  åˆ†ç±»: [å…¨éƒ¨ â–¼]   â”‚
â”‚                                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ã€å›¾åƒæºã€‘                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚  â”‚  ğŸ“·    â”‚ â”‚  ğŸ“    â”‚ â”‚  ğŸ“‚    â”‚              â”‚
â”‚  â”‚ å·¥ä¸š   â”‚ â”‚ å›¾åƒ   â”‚ â”‚ å›¾åƒ   â”‚              â”‚
â”‚  â”‚ ç›¸æœº   â”‚ â”‚ æ–‡ä»¶   â”‚ â”‚ æ–‡ä»¶å¤¹ â”‚              â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚                                                  â”‚
â”‚  ã€é¢„å¤„ç†ã€‘                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  ğŸ”„    â”‚ â”‚  ğŸŒ€    â”‚ â”‚  âš«âšª  â”‚ â”‚  âœ‚ï¸    â”‚  â”‚
â”‚  â”‚ ç°åº¦   â”‚ â”‚ é«˜æ–¯   â”‚ â”‚ äºŒå€¼   â”‚ â”‚ ROI    â”‚  â”‚
â”‚  â”‚ è½¬æ¢   â”‚ â”‚ æ»¤æ³¢   â”‚ â”‚ åŒ–     â”‚ â”‚ è£å‰ª   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                  â”‚
â”‚  ã€å®šä½æ£€æµ‹ã€‘                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  ğŸ¯    â”‚ â”‚  â­•    â”‚ â”‚  ğŸ“    â”‚ â”‚  ğŸ¤–    â”‚  â”‚
â”‚  â”‚ æ¨¡æ¿   â”‚ â”‚ æ‰¾åœ†   â”‚ â”‚ æ‰¾è¾¹ç¼˜ â”‚ â”‚  AI    â”‚  â”‚
â”‚  â”‚ åŒ¹é…   â”‚ â”‚        â”‚ â”‚        â”‚ â”‚ æ£€æµ‹   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                  â”‚
â”‚  ã€æµ‹é‡ã€‘          ã€åˆ¤å®šã€‘         ã€è¾“å‡ºã€‘      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  ğŸ“    â”‚      â”‚  âœ“     â”‚      â”‚  ğŸ“¡    â”‚   â”‚
â”‚  â”‚ è·ç¦»   â”‚      â”‚ èŒƒå›´   â”‚      â”‚  PLC   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                  â”‚
â”‚                          [å–æ¶ˆ]      [å¸®åŠ©]     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 3. ä¸“ä¸šæ¨¡å¼UIç»„ä»¶

### 3.1 é¡¹ç›®æ ‘ç»„ä»¶ (ProjectTreeWidget)

#### 3.1.1 ç±»è®¾è®¡

```cpp
// ============================================================
// é¡¹ç›®æ ‘ç»„ä»¶
// ============================================================
class ProjectTreeWidget : public QTreeWidget {
    Q_OBJECT

public:
    explicit ProjectTreeWidget(QWidget* parent = nullptr);

    void setProject(Project* project);
    void clear();

    // é…æ–¹ç®¡ç†
    void addRecipe(Recipe* recipe);
    void removeRecipe(const QString& recipeId);
    Recipe* selectedRecipe() const;

signals:
    void recipeSelected(Recipe* recipe);
    void recipeDoubleClicked(Recipe* recipe);
    void newRecipeRequested();
    void deleteRecipeRequested(Recipe* recipe);

protected:
    void contextMenuEvent(QContextMenuEvent* event) override;

private slots:
    void onItemSelectionChanged();
    void onItemDoubleClicked(QTreeWidgetItem* item, int column);

private:
    void setupUI();
    void createContextMenus();

private:
    Project* currentProject_;

    QMenu* projectContextMenu_;
    QMenu* recipeContextMenu_;

    QAction* actionNewRecipe_;
    QAction* actionOpenRecipe_;
    QAction* actionSaveRecipe_;
    QAction* actionDeleteRecipe_;
    QAction* actionDuplicateRecipe_;
};
```

#### 3.1.2 æ ‘å½¢ç»“æ„

```
ğŸ“ 3Cç”µå­æ£€æµ‹é¡¹ç›®
  â”œâ”€ ğŸ“· ç›¸æœºé…ç½®
  â”‚   â””â”€ Basler acA1920-40gm
  â”‚
  â”œâ”€ ğŸ“‹ æ£€æµ‹ä»»åŠ¡
  â”‚   â”œâ”€ âœ“ èºä¸å­”æ£€æµ‹
  â”‚   â”‚   â”œâ”€ ğŸ“· ç›¸æœºé‡‡é›†
  â”‚   â”‚   â”œâ”€ ğŸ”„ ç°åº¦è½¬æ¢
  â”‚   â”‚   â”œâ”€ ğŸŒ€ é«˜æ–¯æ»¤æ³¢
  â”‚   â”‚   â”œâ”€ â­• æ‰¾åœ†
  â”‚   â”‚   â”œâ”€ ğŸ“ æµ‹é‡è·ç¦»
  â”‚   â”‚   â””â”€ âœ“  åˆ¤å®š
  â”‚   â”‚
  â”‚   â”œâ”€ âœ“ å±å¹•åˆ’ç—•æ£€æµ‹
  â”‚   â”‚   â””â”€ ...
  â”‚   â”‚
  â”‚   â””â”€ â¸ æ–‡å­—è¯†åˆ« (å·²ç¦ç”¨)
  â”‚       â””â”€ ...
  â”‚
  â”œâ”€ ğŸ“Š ç»Ÿè®¡æŠ¥è¡¨
  â”‚   â”œâ”€ ä»Šæ—¥ç»Ÿè®¡
  â”‚   â””â”€ å†å²è®°å½•
  â”‚
  â””â”€ âš™ï¸ ç³»ç»Ÿè®¾ç½®
      â”œâ”€ PLCé…ç½®
      â””â”€ å…‰æºé…ç½®
```

---

### 3.2 å·¥å…·ç®±ç»„ä»¶ (ToolboxWidget)

#### 3.2.1 ç±»è®¾è®¡

```cpp
// ============================================================
// å·¥å…·ç®±ç»„ä»¶
// ============================================================
class ToolboxWidget : public QWidget {
    Q_OBJECT

public:
    explicit ToolboxWidget(QWidget* parent = nullptr);

    void addCategory(const QString& category, const QList<ToolInfo>& tools);
    void clearCategories();

signals:
    void toolDragged(const QString& toolType);

protected:
    void mousePressEvent(QMouseEvent* event) override;
    void mouseMoveEvent(QMouseEvent* event) override;

private:
    void setupUI();
    void createToolItems();

private:
    QVBoxLayout* layout_;
    QMap<QString, QListWidget*> categoryLists_;

    struct ToolInfo {
        QString type;
        QString name;
        QIcon icon;
        QString description;
    };

    QPoint dragStartPos_;
};
```

#### 3.2.2 UIå¸ƒå±€

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  å·¥å…·ç®±              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                     â”‚
â”‚  â–¼ å›¾åƒæº            â”‚
â”‚  â”œâ”€ ğŸ“· å·¥ä¸šç›¸æœº      â”‚
â”‚  â”œâ”€ ğŸ“ å›¾åƒæ–‡ä»¶      â”‚
â”‚  â””â”€ ğŸ“‚ å›¾åƒåºåˆ—      â”‚
â”‚                     â”‚
â”‚  â–¼ é¢„å¤„ç†            â”‚
â”‚  â”œâ”€ ğŸ”„ ç°åº¦è½¬æ¢      â”‚
â”‚  â”œâ”€ ğŸŒ€ æ»¤æ³¢          â”‚
â”‚  â”œâ”€ âš« äºŒå€¼åŒ–        â”‚
â”‚  â””â”€ âœ‚ï¸ ROIè£å‰ª      â”‚
â”‚                     â”‚
â”‚  â–¼ å®šä½æ£€æµ‹          â”‚
â”‚  â”œâ”€ ğŸ¯ æ¨¡æ¿åŒ¹é…      â”‚
â”‚  â”œâ”€ â­• åœ†æ£€æµ‹        â”‚
â”‚  â”œâ”€ ğŸ“ è¾¹ç¼˜æ£€æµ‹      â”‚
â”‚  â”œâ”€ ğŸ“¦ Blobåˆ†æ      â”‚
â”‚  â””â”€ ğŸ¤– AIæ£€æµ‹        â”‚
â”‚                     â”‚
â”‚  â–¶ æµ‹é‡              â”‚
â”‚  â–¶ åˆ¤å®š              â”‚
â”‚  â–¶ è¾“å‡º              â”‚
â”‚                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### 3.3 å®Œæ•´å±æ€§é¢æ¿ (PropertyPanel)

#### 3.3.1 ç±»è®¾è®¡

```cpp
// ============================================================
// å®Œæ•´å±æ€§é¢æ¿
// ============================================================
class PropertyPanel : public QScrollArea {
    Q_OBJECT

public:
    explicit PropertyPanel(QWidget* parent = nullptr);

    void setTool(VisionTool* tool);
    void clear();

signals:
    void paramChanged(const QString& paramName, const QVariant& value);

private:
    void createBasicGroup(VisionTool* tool);
    void createAdvancedGroup(VisionTool* tool);
    void createDebugGroup(VisionTool* tool);

private:
    QWidget* contentWidget_;
    QVBoxLayout* layout_;

    QGroupBox* basicGroup_;
    QGroupBox* advancedGroup_;
    QGroupBox* debugGroup_;

    VisionTool* currentTool_;
};
```

#### 3.3.2 UIå¸ƒå±€

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  å±æ€§ - åœ†æ£€æµ‹                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                 â”‚
â”‚  â–¼ ã€åŸºæœ¬å‚æ•°ã€‘                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ è¾“å…¥å›¾åƒ:                   â”‚â”‚
â”‚  â”‚ [æ­¥éª¤3-æ»¤æ³¢è¾“å‡º â–¼]          â”‚â”‚
â”‚  â”‚                             â”‚â”‚
â”‚  â”‚ æœ€å°åŠå¾„:                   â”‚â”‚
â”‚  â”‚ [â•â•â—â•â•â•] 50 px              â”‚â”‚
â”‚  â”‚                             â”‚â”‚
â”‚  â”‚ æœ€å¤§åŠå¾„:                   â”‚â”‚
â”‚  â”‚ [â•â•â•â•â•â•â•â—] 200 px           â”‚â”‚
â”‚  â”‚                             â”‚â”‚
â”‚  â”‚ è¾¹ç¼˜å¼ºåº¦:                   â”‚â”‚
â”‚  â”‚ [â•â•â—â•â•â•] 30                 â”‚â”‚
â”‚  â”‚                             â”‚â”‚
â”‚  â”‚ [ğŸ¯ åœ¨å›¾ä¸Šè®¾ç½®ROI]          â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                 â”‚
â”‚  â–¼ ã€é«˜çº§å‚æ•°ã€‘                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ æ‹Ÿåˆç®—æ³•:                   â”‚â”‚
â”‚  â”‚ [æœ€å°äºŒä¹˜æ³• â–¼]              â”‚â”‚
â”‚  â”‚                             â”‚â”‚
â”‚  â”‚ æœ€å°è¾¹ç¼˜ç‚¹æ•°:               â”‚â”‚
â”‚  â”‚ [50_____________]           â”‚â”‚
â”‚  â”‚                             â”‚â”‚
â”‚  â”‚ äºšåƒç´ ç²¾åº¦:                 â”‚â”‚
â”‚  â”‚ â˜‘ å¯ç”¨äºšåƒç´ å®šä½             â”‚â”‚
â”‚  â”‚                             â”‚â”‚
â”‚  â”‚ å¤šåœ†æ£€æµ‹:                   â”‚â”‚
â”‚  â”‚ æœ€å¤§åœ†æ•°: [10___]           â”‚â”‚
â”‚  â”‚ é‡å é˜ˆå€¼: [0.3__]           â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                 â”‚
â”‚  â–¼ ã€è°ƒè¯•é€‰é¡¹ã€‘                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ â˜‘ æ˜¾ç¤ºè¾¹ç¼˜ç‚¹                â”‚â”‚
â”‚  â”‚ â˜‘ æ˜¾ç¤ºæ‹Ÿåˆåœ†                â”‚â”‚
â”‚  â”‚ â˜ æ˜¾ç¤ºåœ†å¿ƒ                  â”‚â”‚
â”‚  â”‚                             â”‚â”‚
â”‚  â”‚ [ä¿å­˜è°ƒè¯•å›¾åƒ]              â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                 â”‚
â”‚       [åº”ç”¨]  [é‡ç½®]  [å¸®åŠ©]    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 4. é€šç”¨UIç»„ä»¶

### 4.1 çŠ¶æ€æ è®¾è®¡

```cpp
// ============================================================
// ä¸»çª—å£çŠ¶æ€æ 
// ============================================================
class MainStatusBar : public QStatusBar {
    Q_OBJECT

public:
    explicit MainStatusBar(QWidget* parent = nullptr);

    // çŠ¶æ€æ›´æ–°
    void setRunning(bool running);
    void setStatusText(const QString& text);
    void setStatistics(int okCount, int ngCount, int total);
    void setExecutionTime(double timeMs);

private:
    void setupUI();

private:
    QLabel* statusIcon_;       // çŠ¶æ€å›¾æ ‡ (â—è¿è¡Œä¸­ / â—‹å°±ç»ª)
    QLabel* statusText_;       // çŠ¶æ€æ–‡æœ¬
    QLabel* statsLabel_;       // ç»Ÿè®¡ä¿¡æ¯
    QLabel* timeLabel_;        // æ‰§è¡Œæ—¶é—´
    QProgressBar* progress_;   // è¿›åº¦æ¡ (å¯é€‰)
};
```

#### çŠ¶æ€æ å¸ƒå±€

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â— è¿è¡Œä¸­ | å½“å‰é…æ–¹: èºä¸å­”æ£€æµ‹ | æ‰§è¡Œ: 23ms | OK: 1,234 / NG: 12 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### 4.2 å·¥å…·æ è®¾è®¡

```cpp
// ============================================================
// ä¸»å·¥å…·æ 
// ============================================================
class MainToolBar : public QToolBar {
    Q_OBJECT

public:
    explicit MainToolBar(QWidget* parent = nullptr);

    void setRunning(bool running);
    void setRecipeModified(bool modified);

signals:
    void newRecipeClicked();
    void openRecipeClicked();
    void saveRecipeClicked();
    void runClicked();
    void stopClicked();
    void pauseClicked();
    void singleStepClicked();
    void captureImageClicked();

private:
    void setupActions();

private:
    QAction* actionNew_;
    QAction* actionOpen_;
    QAction* actionSave_;
    QAction* actionRun_;
    QAction* actionStop_;
    QAction* actionPause_;
    QAction* actionStep_;
    QAction* actionCapture_;
};
```

#### å·¥å…·æ å¸ƒå±€

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [ğŸ“] [ğŸ’¾] â”‚ [â–¶] [â¸] [â¹] [ğŸ”„] â”‚ [ğŸ“·] â”‚ [âš™ï¸] [?]           â”‚
â”‚  æ–‡ä»¶      â”‚  è¿è¡Œæ§åˆ¶        â”‚ é‡‡é›† â”‚  è®¾ç½®  å¸®åŠ©         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 5. ä¸»é¢˜ä¸æ ·å¼

### 5.1 é¢œè‰²æ–¹æ¡ˆ

#### æµ…è‰²ä¸»é¢˜

```cpp
namespace Theme {
    namespace Light {
        // ä¸»è‰²è°ƒ
        const QColor Primary("#2196F3");        // è“è‰²
        const QColor PrimaryDark("#1976D2");
        const QColor PrimaryLight("#BBDEFB");

        // èƒŒæ™¯è‰²
        const QColor Background("#FFFFFF");
        const QColor BackgroundAlt("#F5F5F5");
        const QColor Surface("#FAFAFA");

        // æ–‡å­—è‰²
        const QColor TextPrimary("#212121");
        const QColor TextSecondary("#757575");
        const QColor TextDisabled("#BDBDBD");

        // çŠ¶æ€è‰²
        const QColor Success("#4CAF50");        // ç»¿è‰²
        const QColor Warning("#FF9800");        // æ©™è‰²
        const QColor Error("#F44336");          // çº¢è‰²
        const QColor Info("#2196F3");           // è“è‰²

        // è¾¹æ¡†è‰²
        const QColor Border("#E0E0E0");
        const QColor BorderFocus("#2196F3");
    }
}
```

#### æ·±è‰²ä¸»é¢˜ï¼ˆå¯é€‰ï¼‰

```cpp
namespace Theme {
    namespace Dark {
        const QColor Primary("#42A5F5");
        const QColor Background("#1E1E1E");
        const QColor Surface("#2D2D2D");
        const QColor TextPrimary("#FFFFFF");
        const QColor TextSecondary("#B0B0B0");
        // ...
    }
}
```

### 5.2 å…¨å±€æ ·å¼è¡¨

```css
/* VisionForge Pro å…¨å±€æ ·å¼ */

/* ä¸»çª—å£ */
QMainWindow {
    background-color: #f5f5f5;
}

/* é€šç”¨æŒ‰é’® */
QPushButton {
    background-color: #2196f3;
    color: white;
    border: none;
    border-radius: 4px;
    padding: 8px 16px;
    font-size: 14px;
}

QPushButton:hover {
    background-color: #1976d2;
}

QPushButton:pressed {
    background-color: #0d47a1;
}

QPushButton:disabled {
    background-color: #bdbdbd;
    color: #757575;
}

/* ä¸»è¦æŒ‰é’® */
QPushButton[primary="true"] {
    background-color: #4caf50;
}

QPushButton[primary="true"]:hover {
    background-color: #45a049;
}

/* æ¬¡è¦æŒ‰é’® */
QPushButton[secondary="true"] {
    background-color: transparent;
    color: #2196f3;
    border: 1px solid #2196f3;
}

/* æ»‘å— */
QSlider::groove:horizontal {
    border: 1px solid #bdbdbd;
    height: 6px;
    background: #f5f5f5;
    border-radius: 3px;
}

QSlider::handle:horizontal {
    background: #2196f3;
    border: 1px solid #1976d2;
    width: 18px;
    height: 18px;
    margin: -6px 0;
    border-radius: 9px;
}

QSlider::handle:horizontal:hover {
    background: #42a5f5;
}

/* åˆ†ç»„æ¡† */
QGroupBox {
    border: 1px solid #e0e0e0;
    border-radius: 4px;
    margin-top: 8px;
    padding: 8px;
}

QGroupBox::title {
    subcontrol-origin: margin;
    left: 8px;
    padding: 0 4px;
    color: #757575;
    font-weight: bold;
}

/* è¾“å…¥æ¡† */
QLineEdit, QSpinBox, QDoubleSpinBox, QComboBox {
    border: 1px solid #e0e0e0;
    border-radius: 4px;
    padding: 6px;
    background: white;
}

QLineEdit:focus, QSpinBox:focus, QDoubleSpinBox:focus, QComboBox:focus {
    border: 2px solid #2196f3;
}

/* æ»šåŠ¨æ¡ */
QScrollBar:vertical {
    background: #f5f5f5;
    width: 12px;
    border-radius: 6px;
}

QScrollBar::handle:vertical {
    background: #bdbdbd;
    border-radius: 6px;
    min-height: 20px;
}

QScrollBar::handle:vertical:hover {
    background: #9e9e9e;
}
```

---

## 6. å“åº”å¼è®¾è®¡

### 6.1 ä¸åŒåˆ†è¾¨ç‡é€‚é…

| åˆ†è¾¨ç‡ | å¸ƒå±€è°ƒæ•´ |
|--------|---------|
| 1920x1080 (æ ‡å‡†) | ä¸‰æ å¸ƒå±€ï¼Œå…¨åŠŸèƒ½æ˜¾ç¤º |
| 1366x768 (æœ€å°) | éšè—å·¥å…·ç®±ï¼Œç¼©å°å‚æ•°é¢æ¿ |
| 2560x1440 (2K) | å¢å¤§å­—ä½“ï¼Œå›¾æ ‡æ”¾å¤§ |
| 3840x2160 (4K) | å¯ç”¨HiDPIç¼©æ”¾ |

### 6.2 DPIç¼©æ”¾

```cpp
// åœ¨mainå‡½æ•°ä¸­å¯ç”¨é«˜DPIæ”¯æŒ
QApplication::setAttribute(Qt::AA_EnableHighDpiScaling);
QApplication::setAttribute(Qt::AA_UseHighDpiPixmaps);

// è‡ªé€‚åº”å­—ä½“å¤§å°
QFont font = qApp->font();
font.setPointSize(calculateFontSize(screenDPI));
qApp->setFont(font);
```

---

## 7. æ— éšœç¢è®¾è®¡

### 7.1 å¿«æ·é”®

| åŠŸèƒ½ | å¿«æ·é”® |
|------|--------|
| æ–°å»ºé…æ–¹ | Ctrl+N |
| æ‰“å¼€é…æ–¹ | Ctrl+O |
| ä¿å­˜é…æ–¹ | Ctrl+S |
| è¿è¡Œ | F5 |
| åœæ­¢ | F6 |
| å•æ­¥è°ƒè¯• | F10 |
| é‡‡é›†å›¾åƒ | F8 |
| æ’¤é”€ | Ctrl+Z |
| é‡åš | Ctrl+Y |
| åˆ‡æ¢æ¨¡å¼ | Ctrl+M |

### 7.2 å·¥å…·æç¤º

æ‰€æœ‰å·¥å…·æŒ‰é’®ã€å‚æ•°æ§ä»¶éƒ½å¿…é¡»æœ‰æ¸…æ™°çš„tooltipè¯´æ˜ã€‚

```cpp
button->setToolTip("æ·»åŠ æ–°çš„æ£€æµ‹æ­¥éª¤\nå¿«æ·é”®: Ctrl+T");
```

---

**æ–‡æ¡£çŠ¶æ€**: âœ… å·²å®Œæˆ
**æ€»ç»“**: æ‰€æœ‰è®¾è®¡æ–‡æ¡£å·²å®Œæˆï¼
